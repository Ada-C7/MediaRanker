<main>
  <article>
    <h3>Title: <%=@work.title%></h3>
    <p>Created by: <%=@work.creator%></p>
    <p>Published: <%=@work.publication_year%></p>
    <p>Description: <%=@work.description%></p>

    <%if session[:user_id]%>
      <p>User: <%=@user.username%></p>
      <p>User's total votes: <%=@user.votes.length%></p>
    <%end%>

  </article>
  <section id = "buttons">
    <% if @work.category == "movie"%>
    <%= button_to 'Back to movie list', movies_path, method: :get %>
    <% elsif @work.category == "book"%>
    <%= button_to 'Back to book list', books_path, method: :get %>
    <% elsif @work.category == "album"%>
    <%= button_to 'Back to album list', albums_path, method: :get %>
    <%end%>
    <%= button_to 'Edit', edit_work_path, method: :get %>

    <%= button_to 'Upvote', upvote_path(@work) , method: :post %>

    <%= button_to 'Downvote', downvote_path(@work) , method: :delete %>

    <%= button_to 'Delete', work_path(@work.id), method: :delete, data: {confirm: 'Are you sure?' } %>
  </section>

  <article>
    <p>Total votes for this work: <%=@work.votes_count%></p>
    <h3>Votes for this <%=@work.category%>:</h3>
    <table>
      <tr>
        <th>User</th>
        <th> Date </th>
      </tr>
      <%@work.votes.each do |vote|%>
        <tr>
          <td> <%=link_to vote.user.username, user_path(vote.user.id)  %>  </td>
          <td> <%= vote.created_at.month%>/<%= vote.created_at.day%>/<%= vote.created_at.year%></td>
        </tr>
      <%end%>
    </table>
  </article>
</main>
